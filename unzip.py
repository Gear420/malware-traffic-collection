#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Time    : 2021/7/8 4:16 上午
# @Author  : Gear
import os
import zipfile
import re

def point_file_name(path):
    return [os.path.join(item[0],file_name) for item in os.walk(path) for file_name in item[-1] if re.search(r'.rar$|.zip$',file_name)]


if __name__ == '__main__':
    path = '/Users/zhangxingyu/homework/malware_traffic_collection/zip
    file_names = point_file_name(path)
    i = 0
    for file_name in file_names:
        print (str(i) + '/' + str(len(file_names)))
        i = i + 1
        zip = zipfile.ZipFile(file_name)
        zip.extractall(path='/Users/zhangxingyu/homework/malware_traffic_collection/malwares',
                       pwd='infected'.encode('ascii'))
